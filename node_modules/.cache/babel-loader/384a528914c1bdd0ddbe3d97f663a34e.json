{"ast":null,"code":"var _jsxFileName = \"W:\\\\Study\\\\BlogReactUI\\\\reactblogproject\\\\src\\\\article\\\\collect.js\";\nimport React from 'react';\nimport { List, Avatar, Icon, Col, Row, message } from 'antd';\nimport Profile from './profile';\nimport { connect } from 'react-redux';\nimport { getarticlelist, getarticlecollect, getcollectlist } from '../store/action';\nimport axios from 'axios';\nconst updatearticlelike = '/api/updatelike';\nconst updatearticlecollect = '/api/updatecollect';\nconst collectlisturl = '/api/getcollectarticle';\n\nclass Collect extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.collectfunc = (item, articlecollect) => {\n      if (!this.props.user) {\n        message.error(\"请登录后收藏\");\n        return;\n      }\n\n      for (let i = 0; i < articlecollect.length; i++) {\n        if (articlecollect[i] === item.dateid) {\n          articlecollect.splice(i, 1);\n          getarticlecollect(articlecollect);\n          this.setState({});\n          return;\n        }\n      }\n\n      articlecollect.push(item.dateid);\n      getarticlecollect(articlecollect);\n      this.setState({});\n    };\n\n    this.commentfunc = () => {\n      console.log('commentfunc');\n    };\n\n    let islogin = props.islogin;\n\n    if (!islogin) {\n      message.warn(\"请登录后使用\");\n      this.props.history.push('/article');\n    }\n\n    let sendobj = {\n      'articlecollect': props.articlecollect\n    };\n\n    if (props.articlecollect.length > 0) {\n      axios({\n        url: collectlisturl,\n        method: 'post',\n        data: sendobj\n      }).then(res => {\n        let data = res.data;\n        data = data.reverse();\n        this.props.getcollectlist(data);\n        this.setState({\n          value: ''\n        });\n      }).catch(e => {\n        console.log(e);\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.islogin) {\n      let sendobj = {\n        'articlelist': this.props.collectlist\n      };\n      axios({\n        url: updatearticlelike,\n        method: 'post',\n        data: sendobj\n      }).then(res => {\n        let data = res.data;\n\n        if (data === 'success') {\n          console.log('update');\n        } else console.log(data);\n      }).catch(err => {\n        console.log(err);\n      });\n      let sendarticle = {\n        'articlecollect': this.props.articlecollect,\n        'user': this.props.user\n      };\n      axios({\n        url: updatearticlecollect,\n        method: 'post',\n        data: sendarticle\n      }).then(res => {\n        let data = res.data;\n\n        if (data === 'success') {\n          console.log('update');\n        } else {\n          console.log(data);\n        }\n      });\n    }\n  }\n\n  render() {\n    let articlecollect = this.props.articlecollect;\n    return React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: {\n        span: 0\n      },\n      xl: {\n        span: 6\n      },\n      style: {\n        height: '100px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), React.createElement(Col, {\n      xs: {\n        span: 24\n      },\n      xl: {\n        span: 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(List, {\n      itemLayout: \"vertical\",\n      size: \"large\",\n      header: \"\".concat(this.props.collectlist.length, \"\\u6761\\u6536\\u85CF\"),\n      pagination: {\n        pageSize: 5\n      },\n      dataSource: this.props.collectlist,\n      renderItem: (item, index) => React.createElement(List.Item, {\n        key: item.dateid,\n        actions: [React.createElement(\"span\", {\n          onClick: this.collectfunc.bind(this, item, articlecollect),\n          style: {\n            color: articlecollect.includes(item.dateid) ? 'red' : ''\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          type: \"star-o\",\n          style: {\n            marginRight: 8\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }), \"\\u6536\\u85CF\"), React.createElement(\"span\", {\n          onClick: this.commentfunc.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          type: \"message\",\n          style: {\n            marginRight: 8\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }), item.comment.length)],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(List.Item.Meta, {\n        avatar: React.createElement(Avatar, {\n          src: item.headurl,\n          size: 50,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }),\n        title: React.createElement(\"a\", {\n          href: '/articledetail/' + item.dateid,\n          className: \"apoint\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, item.title),\n        description: item.author,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    })), React.createElement(Col, {\n      xs: {\n        span: 0\n      },\n      xl: {\n        span: 4\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(Profile, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })), React.createElement(Col, {\n      xs: {\n        span: 0\n      },\n      xl: {\n        span: 6\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default connect((props, state) => Object.assign({}, props, state), {\n  getarticlelist,\n  getcollectlist,\n  getarticlecollect\n})(Collect);","map":{"version":3,"sources":["W:\\Study\\BlogReactUI\\reactblogproject\\src\\article\\collect.js"],"names":["React","List","Avatar","Icon","Col","Row","message","Profile","connect","getarticlelist","getarticlecollect","getcollectlist","axios","updatearticlelike","updatearticlecollect","collectlisturl","Collect","Component","constructor","props","collectfunc","item","articlecollect","user","error","i","length","dateid","splice","setState","push","commentfunc","console","log","islogin","warn","history","sendobj","url","method","data","then","res","reverse","value","catch","e","componentWillUnmount","collectlist","err","sendarticle","render","span","height","pageSize","index","bind","color","includes","marginRight","comment","headurl","title","author","state","Object","assign"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {List,Avatar,Icon,Col,Row,message} from 'antd';\r\nimport Profile from './profile';\r\nimport { connect } from 'react-redux';\r\nimport {getarticlelist,getarticlecollect,getcollectlist} from '../store/action';\r\nimport axios from 'axios';\r\n\r\nconst updatearticlelike='/api/updatelike';\r\nconst updatearticlecollect='/api/updatecollect';\r\nconst collectlisturl='/api/getcollectarticle';\r\n\r\nclass Collect extends React.Component{\r\n    constructor(props){\r\n      super(props);\r\n      let islogin=props.islogin;\r\n      if(!islogin){\r\n          message.warn(\"请登录后使用\");\r\n          this.props.history.push('/article');\r\n      }\r\n      let sendobj ={'articlecollect':props.articlecollect}\r\n      if(props.articlecollect.length>0){\r\n        axios({\r\n          url:collectlisturl,\r\n          method:'post',\r\n          data:sendobj\r\n        }).then((res)=>{\r\n          let data=res.data;\r\n          data=data.reverse();\r\n          this.props.getcollectlist(data);\r\n          this.setState({value:''});\r\n        }).catch((e)=>{console.log(e)})\r\n      }\r\n    }\r\n    collectfunc=(item,articlecollect)=>{\r\n      if(!this.props.user){\r\n        message.error(\"请登录后收藏\")\r\n        return\r\n      }\r\n      for(let i=0;i<articlecollect.length;i++){\r\n        if(articlecollect[i]===item.dateid){\r\n          articlecollect.splice(i,1);\r\n          getarticlecollect(articlecollect);\r\n          this.setState({});\r\n          return\r\n        }\r\n      }  \r\n      articlecollect.push(item.dateid);\r\n      getarticlecollect(articlecollect);\r\n      this.setState({});\r\n    } \r\n    commentfunc=()=>{\r\n      console.log('commentfunc');\r\n    }\r\n    componentWillUnmount(){\r\n      if(this.props.islogin){\r\n        let sendobj={'articlelist':this.props.collectlist};\r\n        axios({\r\n          url:updatearticlelike,\r\n          method:'post',\r\n          data:sendobj\r\n        }).then((res)=>{\r\n          let data=res.data;\r\n            if(data==='success'){\r\n              console.log('update');\r\n            }else(console.log(data))\r\n        }).catch((err)=>{console.log(err)});\r\n        let sendarticle={\r\n          'articlecollect':this.props.articlecollect,\r\n          'user':this.props.user\r\n        }\r\n        axios({\r\n          url:updatearticlecollect,\r\n          method:'post',\r\n          data:sendarticle\r\n        }).then((res)=>{\r\n          let data=res.data;\r\n          if(data==='success'){\r\n            console.log('update');\r\n          }else{\r\n            console.log(data);\r\n          }\r\n        })\r\n      }\r\n    }\r\n    render(){\r\n      let articlecollect=this.props.articlecollect;\r\n      return(\r\n          <Row >\r\n            <Col xs={{span:0}} xl={{span:6}} style={{height:'100px'}}></Col>\r\n            <Col xs={{span:24}} xl={{span:10}}>\r\n            <List\r\n              itemLayout=\"vertical\"\r\n              size=\"large\"\r\n              header={`${this.props.collectlist.length}条收藏`}\r\n              pagination={{\r\n                pageSize: 5,\r\n              }}\r\n              dataSource={this.props.collectlist}  \r\n              renderItem={(item,index) => (\r\n                <List.Item\r\n                    key={item.dateid}\r\n                    actions={[\r\n                      <span onClick={this.collectfunc.bind(this,item,articlecollect)} style={{color:articlecollect.includes(item.dateid)?'red':''}}>\r\n                        <Icon type=\"star-o\" style={{ marginRight: 8 }} />\r\n                        收藏\r\n                      </span>,\r\n                      <span onClick={this.commentfunc.bind(this)} >\r\n                        <Icon type=\"message\" style={{ marginRight: 8 }} />\r\n                        {item.comment.length}\r\n                      </span>,\r\n                    ]}\r\n                >\r\n                  <List.Item.Meta avatar={<Avatar src={item.headurl} size={50} />}\r\n                    title={<a href={'/articledetail/'+item.dateid} className=\"apoint\">{item.title}</a>}\r\n                    description={item.author}\r\n                  />\r\n                </List.Item>\r\n              )}\r\n            />\r\n            </Col>\r\n            <Col xs={{span:0}} xl={{span:4}}>\r\n              <Profile></Profile>\r\n            </Col>\r\n            <Col xs={{span:0}} xl={{span:6}}></Col>\r\n          </Row>\r\n      )   \r\n    }\r\n}\r\nexport default connect((props,state)=>(Object.assign({},props,state)),{getarticlelist,getcollectlist,getarticlecollect})(Collect)"]},"metadata":{},"sourceType":"module"}