{"ast":null,"code":"var _jsxFileName = \"W:\\\\Study\\\\BlogReactUI\\\\reactblogproject\\\\src\\\\index\\\\header\\\\header.js\";\nimport React from 'react';\nimport Article from '../../article/article';\nimport Message from '../../message/message';\nimport Loginregistpage from '../../login/compound';\nimport Notfound from '../../404page/404page';\nimport { Link, Switch } from 'react-router-dom';\nimport Routercontrol from '../../routercontrol';\nimport { Menu, Icon, Row, Col, Drawer } from 'antd';\nimport Content from '../content/content';\nimport { connect } from 'react-redux';\nimport { getlogin, getuser, getnickname, getarticlecollect, getheadurl, getarticlelist, getmessagelist } from '../../store/action';\nimport Ueditor from '../../article/ueditor';\nimport Articledetail from '../../article/articledetail';\nimport Profiledetail from '../../article/profiledetail';\nimport Collect from '../../article/collect';\nimport axios from 'axios';\nconst checkloginurl = \"/api/checkuser\";\nconst getarticleurl = '/api/getarticle';\nconst achieveurl = 'api/getmessage';\n\nclass Headerpage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 'mail',\n      visible: false\n    };\n\n    this.handleClick = e => {\n      this.setState({\n        current: e.key\n      });\n    };\n\n    this.showdrawer = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.onClose = () => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    if (props.articlelist.length === 0) {\n      axios({\n        url: getarticleurl,\n        method: 'post',\n        data: {}\n      }).then(res => {\n        let data = res.data;\n        data = data.reverse();\n        this.props.getarticlelist(data);\n      }, err => console.log(err));\n    }\n\n    if (props.path !== \"/articledetail/:id\") {\n      if (props.messagelist.length === 0) {\n        console.log(props);\n        axios({\n          url: achieveurl,\n          method: 'post',\n          data: {}\n        }).then(res => {\n          let data = res.data.reverse();\n          props.getmessagelist(data);\n          this.setState({\n            value: ''\n          });\n        }, err => {\n          console.log(err);\n        });\n      }\n    }\n  }\n\n  render() {\n    if (sessionStorage.getItem('user') && this.props.islogin === false) {\n      let sessionuser = sessionStorage.getItem('user');\n      let sendobj = {\n        username: sessionuser\n      };\n      axios({\n        url: checkloginurl,\n        method: 'post',\n        data: sendobj\n      }).then(data => {\n        let res = data.data;\n        this.props.getlogin();\n        this.props.getuser(sessionuser);\n        this.props.getnickname(res.nickname);\n        this.props.getheadurl(res.headurl);\n        this.props.getarticlecollect(res.articlecollect);\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(Row, {\n      gutter: 8,\n      type: \"flex\",\n      justify: \"center\",\n      align: \"middle\",\n      style: {\n        height: '150px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: {\n        span: 0\n      },\n      xl: {\n        span: 8\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(Drawer, {\n      title: \"\\u5BFC \\u822A \\u680F\",\n      placement: \"left\",\n      closable: true,\n      onClose: this.onClose,\n      visible: this.state.visible,\n      mask: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"pstyle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \" \", React.createElement(Icon, {\n      type: \"home\",\n      style: {\n        float: 'left',\n        marginTop: '5px',\n        fontSize: '22px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), \"\\u4E3B\\u9875\")), React.createElement(Link, {\n      to: \"/article\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"pstyle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"book\",\n      style: {\n        float: 'left',\n        marginTop: '5px',\n        fontSize: '22px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), \"\\u6587\\u7AE0\")), React.createElement(Link, {\n      to: \"/message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"pstyle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"form\",\n      style: {\n        float: 'left',\n        marginTop: '5px',\n        fontSize: '22px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), \"\\u7559\\u8A00\"))), React.createElement(Icon, {\n      type: \"unordered-list\",\n      style: {\n        marginLeft: '20px',\n        fontSize: '22px'\n      },\n      onClick: this.showdrawer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    })), React.createElement(Col, {\n      xs: {\n        span: 22\n      },\n      xl: {\n        span: 8\n      },\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Menu, {\n      onClick: this.handleClick,\n      selectedKeys: [this.state.current],\n      mode: \"horizontal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(Menu.Item, {\n      key: \"home\",\n      style: {\n        padding: '0 30px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"home\",\n      className: \"svg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), \"\\u4E3B\\u9875\")), React.createElement(Menu.Item, {\n      key: \"article\",\n      style: {\n        padding: '0 30px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/article\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"book\",\n      className: \"svg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), \"\\u6587\\u7AE0\")), React.createElement(Menu.Item, {\n      key: \"message\",\n      style: {\n        padding: '0 30px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"form\",\n      className: \"svg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), \"\\u7559\\u8A00\")))), React.createElement(Col, {\n      xs: {\n        span: 2\n      },\n      xl: {\n        span: 8\n      },\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/login/accountlogin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"user\",\n      style: {\n        float: 'right',\n        marginRight: '20px',\n        fontSize: '22px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    })))), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(Routercontrol, {\n      homename: Content,\n      articlename: Article,\n      messagename: Message,\n      loginname: Loginregistpage,\n      notfondname: Notfound,\n      ueditorname: Ueditor,\n      detailname: Articledetail,\n      profiledetailname: Profiledetail,\n      articlecollectname: Collect,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default connect((state, props) => Object.assign({}, props, state), {\n  getarticlelist,\n  getmessagelist,\n  getlogin,\n  getuser,\n  getnickname,\n  getarticlecollect,\n  getheadurl\n})(Headerpage);","map":{"version":3,"sources":["W:\\Study\\BlogReactUI\\reactblogproject\\src\\index\\header\\header.js"],"names":["React","Article","Message","Loginregistpage","Notfound","Link","Switch","Routercontrol","Menu","Icon","Row","Col","Drawer","Content","connect","getlogin","getuser","getnickname","getarticlecollect","getheadurl","getarticlelist","getmessagelist","Ueditor","Articledetail","Profiledetail","Collect","axios","checkloginurl","getarticleurl","achieveurl","Headerpage","Component","constructor","props","state","current","visible","handleClick","e","setState","key","showdrawer","onClose","articlelist","length","url","method","data","then","res","reverse","err","console","log","path","messagelist","value","render","sessionStorage","getItem","islogin","sessionuser","sendobj","username","nickname","headurl","articlecollect","height","span","float","marginTop","fontSize","marginLeft","textAlign","padding","marginRight","Object","assign"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Article from '../../article/article';\r\nimport Message from '../../message/message';\r\nimport Loginregistpage from '../../login/compound';\r\nimport Notfound from '../../404page/404page';\r\nimport{Link,Switch} from 'react-router-dom';\r\nimport Routercontrol from '../../routercontrol'\r\nimport {Menu,Icon,Row,Col,Drawer} from 'antd';\r\nimport Content from '../content/content';\r\nimport {connect} from 'react-redux';\r\nimport {getlogin,getuser,getnickname,getarticlecollect,getheadurl,getarticlelist,getmessagelist} from '../../store/action'\r\nimport Ueditor from '../../article/ueditor';\r\nimport Articledetail from '../../article/articledetail';\r\nimport Profiledetail from '../../article/profiledetail';\r\nimport Collect from '../../article/collect';\r\nimport axios from 'axios';\r\n\r\nconst checkloginurl=\"/api/checkuser\";\r\nconst getarticleurl='/api/getarticle';\r\nconst achieveurl='api/getmessage';\r\n\r\nclass Headerpage extends React.Component{\r\n    constructor(props){\r\n      super(props);\r\n      if(props.articlelist.length===0){\r\n        axios({\r\n          url:getarticleurl,\r\n          method:'post',\r\n          data:{}\r\n        }).then((res)=>{\r\n          let data=res.data;\r\n          data=data.reverse()\r\n          this.props.getarticlelist(data);\r\n        },(err)=>(console.log(err)))\r\n      } \r\n      if(props.path!==\"/articledetail/:id\"){\r\n        if(props.messagelist.length===0){\r\n          console.log(props);\r\n          axios({\r\n            url:achieveurl,\r\n            method:'post',\r\n            data:{}\r\n          }).then((res)=>{\r\n            let data=res.data.reverse();\r\n            props.getmessagelist(data);\r\n            this.setState({value:''});\r\n          },(err)=>{console.log(err)})\r\n        }\r\n      }    \r\n    }\r\n    state = {\r\n      current: 'mail',\r\n      visible:false\r\n    };\r\n    handleClick=(e)=> {\r\n      this.setState({\r\n        current:e.key,\r\n      });\r\n    };\r\n    showdrawer=()=>{\r\n      this.setState({\r\n        visible:true\r\n      })\r\n    }\r\n    onClose=()=>{\r\n      this.setState({\r\n        visible: false,\r\n      });\r\n    };\r\n    render(){\r\n      if(sessionStorage.getItem('user')&&this.props.islogin===false){\r\n        let sessionuser=sessionStorage.getItem('user');\r\n        let sendobj={username:sessionuser};\r\n        axios({\r\n          url:checkloginurl,\r\n          method:'post',\r\n          data:sendobj\r\n        }).then((data)=>{\r\n          let res=data.data;\r\n          this.props.getlogin();\r\n          this.props.getuser(sessionuser);\r\n          this.props.getnickname(res.nickname);\r\n          this.props.getheadurl(res.headurl);\r\n          this.props.getarticlecollect(res.articlecollect);\r\n        })\r\n      }\r\n      return(\r\n        <div >\r\n          <Row gutter={8} type=\"flex\" justify=\"center\" align=\"middle\" style={{height:'150px'}} >\r\n          <Col xs={{span:0}} xl={{span:8}} >\r\n            <Drawer   \r\n              title=\"导 航 栏\"\r\n              placement='left'\r\n              closable={true}\r\n              onClose={this.onClose}\r\n              visible={this.state.visible}\r\n              mask={false}\r\n            >\r\n              <Link to='/'>\r\n              <p className='pstyle' > <Icon type=\"home\" style={{float:'left',marginTop:'5px',fontSize:'22px'}}/>主页</p>\r\n              </Link>\r\n              <Link to='/article'>\r\n              <p  className='pstyle'><Icon type=\"book\"  style={{float:'left',marginTop:'5px',fontSize:'22px'}}/>文章</p>\r\n              </Link>\r\n              <Link to='/message'>\r\n              <p  className='pstyle'><Icon type=\"form\"  style={{float:'left',marginTop:'5px',fontSize:'22px'}} />留言</p>\r\n              </Link>\r\n            </Drawer>\r\n            <Icon type=\"unordered-list\" style={{marginLeft:'20px',fontSize:'22px'}} onClick={this.showdrawer} />\r\n          </Col>\r\n          <Col xs={{span:22}} xl={{span:8}}  style={{textAlign:'center'}}>\r\n            <Menu onClick={this.handleClick} selectedKeys={[this.state.current]} mode=\"horizontal\">\r\n              <Menu.Item key=\"home\" style={{padding:'0 30px'}}>\r\n                <Link to='/home'><Icon type=\"home\" className='svg'/>主页</Link>\r\n              </Menu.Item>\r\n              <Menu.Item key=\"article\" style={{padding:'0 30px'}}>\r\n                <Link to='/article'><Icon type=\"book\" className='svg'/>文章</Link>\r\n              </Menu.Item>\r\n              <Menu.Item key=\"message\" style={{padding:'0 30px'}}>\r\n                <Link to='/message'><Icon type=\"form\" className='svg'/>留言</Link>\r\n              </Menu.Item>\r\n            </Menu>\r\n          </Col>\r\n          <Col xs={{span:2}} xl={{span:8}} style={{textAlign:'center'}} >\r\n            <Link to='/login/accountlogin'>\r\n            <Icon type=\"user\" style={{float:'right',marginRight:'20px',fontSize:'22px'}} />\r\n            </Link>\r\n          </Col>\r\n          </Row>\r\n          <Switch>\r\n            <Routercontrol \r\n              homename={Content} articlename={Article} messagename={Message} \r\n              loginname={Loginregistpage}  notfondname={Notfound} ueditorname={Ueditor}\r\n              detailname={Articledetail} profiledetailname={Profiledetail} articlecollectname={Collect}\r\n            >\r\n            </Routercontrol>\r\n          </Switch>\r\n        </div>\r\n      )\r\n    }\r\n}\r\n\r\nexport default connect((state,props)=>(Object.assign({},props,state)),{getarticlelist,getmessagelist,getlogin,getuser,getnickname,getarticlecollect,getheadurl})(Headerpage);"]},"metadata":{},"sourceType":"module"}